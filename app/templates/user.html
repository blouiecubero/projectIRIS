{% extends "base.html" %}
{% block page_content %}

<div class="page-header">

	<!--Loads picture-->
	<img class="img-rounded profile-thumbnail" src={{ filename }} height="100" width="100" >
	
	<!--Loads user info-->
	<h1>{{ user.username }}</h1>
	{% if user.name or user.location %}
	<p>
		{% if user.location %}
			From <a href = "http://maps.google.com/?q={{ user.location }}">
				{{ user.location }}
			</a>
		{% endif %}
	</p>
	{% endif %}
	<!--If the user is an administrator, the admin can mail directly the user's email-->
	{% if current_user.is_administrator() %}
	<p><a href="mailto:{{ user.email }}>{{ user.email }}"></a></p>
	{% endif %}
	
	<!--Show's user's about me-->
	{% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}
	
	<!--Displays time when the user was last active-->
	<p>
		Member since {{ moment(user.member_since).format('L') }}.
		Last seen {{ moment(user.last_seen).fromNow() }}.
	</p>
	
	<!--Displays buttons if the user is checking its profile-->
	{% if user == current_user %}
	<a class="btn btn-default" href= "{{ url_for('.edit_profile') }}">Edit Profile</a>
	<a class="btn btn-default" href= "{{ url_for('.upload_picture') }}">Edit Picture</a>
	{% endif %}
	
	<!--If the user is an admin, the admin can edit the profile of the user it currently viewing.-->
	{% if current_user.is_administrator() %}
    <a class="btn btn-danger" href="{{ url_for('.edit_profile_admin', id=user.id) }}">Edit Profile [Admin]</a>
    {% endif %}
	
	<!--If the user is an administrator, the admin can choose the files of registered users.-->
	{% if current_user.is_administrator() %}
	<form method="POST" enctype="multipart/form-data">
		<h3>Select User: </h3>
			<select name="users">
				{% for user in all_users %}
				<option value={{ user.username }}>{{user.username}}</option>
				{% endfor %}
			</select>
		
		<input class="btn btn-default" button type="submit" name="button" value="Choose User"></button>
		
	</form>
	{% endif %}
	
	<!--Includes filebase (Both admin and users can view this-->
	{% include '_filebase.html' %}
	
	<!--If the user is an admin, the admin can choose a user and upload a file to the chosen user.-->
	{% if current_user.is_administrator() %}
	{% include '_upload_file.html' %}
	{% endif %}
	
</div>
{% endblock %}